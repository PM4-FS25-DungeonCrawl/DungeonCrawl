<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DungeonCrawl: src/logging/logger.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DungeonCrawl
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('logger_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">logger.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implements logging functionality for the game.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="logger_8h_source.html">logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thread__handler_8h_source.html">../thread/thread_handler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logger__config_8h_source.html">logger_config.h</a>&quot;</code><br />
<code>#include &quot;ringbuffer.h&quot;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
</div>
<p><a href="logger_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2c14e30b8edd80c33d5aca8e59eae234" id="r_a2c14e30b8edd80c33d5aca8e59eae234"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c14e30b8edd80c33d5aca8e59eae234">STAT_STRUCT</a>&#160;&#160;&#160;struct stat</td></tr>
<tr class="memitem:ac79f8734f2028b939fb79cbff7cbc473" id="r_ac79f8734f2028b939fb79cbff7cbc473"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac79f8734f2028b939fb79cbff7cbc473">STAT_FUNC</a>&#160;&#160;&#160;stat</td></tr>
<tr class="memitem:a33f0483b64221b258b080bba5882cf3c" id="r_a33f0483b64221b258b080bba5882cf3c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a33f0483b64221b258b080bba5882cf3c">MKDIR</a>(path)</td></tr>
<tr class="memitem:a837df2c29aacf37cb96c2b65acb312a6" id="r_a837df2c29aacf37cb96c2b65acb312a6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>&#160;&#160;&#160;&quot;/&quot;</td></tr>
<tr class="memitem:a4620eb783fd7aaa1d61fe4fdaa750d74" id="r_a4620eb783fd7aaa1d61fe4fdaa750d74"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4620eb783fd7aaa1d61fe4fdaa750d74">MAX_PATH_SIZE</a>&#160;&#160;&#160;4096</td></tr>
<tr class="memitem:a45a75d076fd0268db347a013fc2a81ed" id="r_a45a75d076fd0268db347a013fc2a81ed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a45a75d076fd0268db347a013fc2a81ed">LOG_DIRECTORY</a>&#160;&#160;&#160;&quot;log&quot;</td></tr>
<tr class="memitem:ac903c26f555c37dbf720f4fc283eaa70" id="r_ac903c26f555c37dbf720f4fc283eaa70"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac903c26f555c37dbf720f4fc283eaa70">LOG_FILE_FORMAT</a>&#160;&#160;&#160;&quot;log-%d.txt&quot;</td></tr>
<tr class="memitem:aa62433a7807cf7f0bc9cf3f8323ba80c" id="r_aa62433a7807cf7f0bc9cf3f8323ba80c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa62433a7807cf7f0bc9cf3f8323ba80c">TIMESTAMP_FORMAT</a>&#160;&#160;&#160;&quot;%Y-%m-%d %H:%M:%S&quot;</td></tr>
<tr class="memitem:af8dd24004011a014ca1cd76e3946e933" id="r_af8dd24004011a014ca1cd76e3946e933"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8dd24004011a014ca1cd76e3946e933">MSG_FORMAT</a>&#160;&#160;&#160;&quot;[%s] [%s] [%s] : %s\n&quot;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a03d231b23688d7e15fc0d99a2e291d49" id="r_a03d231b23688d7e15fc0d99a2e291d49"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03d231b23688d7e15fc0d99a2e291d49">ensure_log_dir</a> (void)</td></tr>
<tr class="memdesc:a03d231b23688d7e15fc0d99a2e291d49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensures that the predefined log directory already exists, if not create a new one.  <br /></td></tr>
<tr class="memitem:a1c7d106319f285b516ab672dbdb42f89" id="r_a1c7d106319f285b516ab672dbdb42f89"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1c7d106319f285b516ab672dbdb42f89">open_log_file</a> (int is_init)</td></tr>
<tr class="memdesc:a1c7d106319f285b516ab672dbdb42f89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the log file with the current saved file id in appended modus.  <br /></td></tr>
<tr class="memitem:a244494b217506ed4f6b95e4e36283b43" id="r_a244494b217506ed4f6b95e4e36283b43"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a244494b217506ed4f6b95e4e36283b43">check_log_file</a> (void)</td></tr>
<tr class="memdesc:a244494b217506ed4f6b95e4e36283b43"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function should be called whenever a new log msg must be written.  <br /></td></tr>
<tr class="memitem:a4026eeab5ad9c9a701338f7f873ed33d" id="r_a4026eeab5ad9c9a701338f7f873ed33d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4026eeab5ad9c9a701338f7f873ed33d">get_latest_file_id</a> (void)</td></tr>
<tr class="memdesc:a4026eeab5ad9c9a701338f7f873ed33d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function gets the latest file id from the log directory.  <br /></td></tr>
<tr class="memitem:a564a76b9f2eaa839be733afb99ffb45d" id="r_a564a76b9f2eaa839be733afb99ffb45d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a564a76b9f2eaa839be733afb99ffb45d">start_log_writer_thread</a> (void)</td></tr>
<tr class="memdesc:a564a76b9f2eaa839be733afb99ffb45d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the log writer thread.  <br /></td></tr>
<tr class="memitem:ac473ecd88ac8f7ac94805f2e335c67c5" id="r_ac473ecd88ac8f7ac94805f2e335c67c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac473ecd88ac8f7ac94805f2e335c67c5">log_writer_thread</a> (void)</td></tr>
<tr class="memdesc:ac473ecd88ac8f7ac94805f2e335c67c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will be called from a different thread to read from the ringbuffer and then write in the log file.  <br /></td></tr>
<tr class="memitem:a542d97fece81d2a06b1e1ddf3d461c8a" id="r_a542d97fece81d2a06b1e1ddf3d461c8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a542d97fece81d2a06b1e1ddf3d461c8a">init_logger</a> (void)</td></tr>
<tr class="memdesc:a542d97fece81d2a06b1e1ddf3d461c8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the logging system for the application.  <br /></td></tr>
<tr class="memitem:aa70df4f70b7969a40b70fda659005550" id="r_aa70df4f70b7969a40b70fda659005550"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa70df4f70b7969a40b70fda659005550">log_msg</a> (const log_level_t level, const char *module, const char *format,...)</td></tr>
<tr class="memdesc:aa70df4f70b7969a40b70fda659005550"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs a formatted message with a specified log level and module.  <br /></td></tr>
<tr class="memitem:a1d815b48f04fdfadbb66a1a6bebbe721" id="r_a1d815b48f04fdfadbb66a1a6bebbe721"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d815b48f04fdfadbb66a1a6bebbe721">shutdown_logger</a> (void)</td></tr>
<tr class="memdesc:a1d815b48f04fdfadbb66a1a6bebbe721"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shuts down the logging system for the application.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af20b78be3e637717e6e622f23bff02f4" id="r_af20b78be3e637717e6e622f23bff02f4"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af20b78be3e637717e6e622f23bff02f4">log_level_str</a> [] = {&quot;DEBUG&quot;, &quot;FINE&quot;, &quot;INFO&quot;, &quot;WARNING&quot;, &quot;ERROR&quot;}</td></tr>
<tr class="memitem:ab936051f5aaca44c6c3c41dee0d19c36" id="r_ab936051f5aaca44c6c3c41dee0d19c36"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab936051f5aaca44c6c3c41dee0d19c36">log_file</a> = NULL</td></tr>
<tr class="memitem:ab4698c0d5c140a233de44e801491fc35" id="r_ab4698c0d5c140a233de44e801491fc35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structring__buffer__t.html">ring_buffer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab4698c0d5c140a233de44e801491fc35">log_buffer</a></td></tr>
<tr class="memitem:a4e9f18da6d462f70b0105ba3ee976e16" id="r_a4e9f18da6d462f70b0105ba3ee976e16"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e9f18da6d462f70b0105ba3ee976e16">logger_is_running</a> = false</td></tr>
<tr class="memitem:a26004895b14f496087255e72745bee14" id="r_a26004895b14f496087255e72745bee14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a26004895b14f496087255e72745bee14">file_id</a> = 0</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements logging functionality for the game. </p>

<p class="definition">Definition in file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
</div><a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="a45a75d076fd0268db347a013fc2a81ed" name="a45a75d076fd0268db347a013fc2a81ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45a75d076fd0268db347a013fc2a81ed">&#9670;&#160;</a></span>LOG_DIRECTORY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_DIRECTORY&#160;&#160;&#160;&quot;log&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00037">37</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="ac903c26f555c37dbf720f4fc283eaa70" name="ac903c26f555c37dbf720f4fc283eaa70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac903c26f555c37dbf720f4fc283eaa70">&#9670;&#160;</a></span>LOG_FILE_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_FILE_FORMAT&#160;&#160;&#160;&quot;log-%d.txt&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00038">38</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="a4620eb783fd7aaa1d61fe4fdaa750d74" name="a4620eb783fd7aaa1d61fe4fdaa750d74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4620eb783fd7aaa1d61fe4fdaa750d74">&#9670;&#160;</a></span>MAX_PATH_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PATH_SIZE&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00034">34</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="a33f0483b64221b258b080bba5882cf3c" name="a33f0483b64221b258b080bba5882cf3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33f0483b64221b258b080bba5882cf3c">&#9670;&#160;</a></span>MKDIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MKDIR</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">mkdir(path, 0755)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00030">30</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="af8dd24004011a014ca1cd76e3946e933" name="af8dd24004011a014ca1cd76e3946e933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8dd24004011a014ca1cd76e3946e933">&#9670;&#160;</a></span>MSG_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_FORMAT&#160;&#160;&#160;&quot;[%s] [%s] [%s] : %s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00041">41</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="a837df2c29aacf37cb96c2b65acb312a6" name="a837df2c29aacf37cb96c2b65acb312a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a837df2c29aacf37cb96c2b65acb312a6">&#9670;&#160;</a></span>PATH_SEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PATH_SEP&#160;&#160;&#160;&quot;/&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00031">31</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="ac79f8734f2028b939fb79cbff7cbc473" name="ac79f8734f2028b939fb79cbff7cbc473"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac79f8734f2028b939fb79cbff7cbc473">&#9670;&#160;</a></span>STAT_FUNC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_FUNC&#160;&#160;&#160;stat</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00029">29</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="a2c14e30b8edd80c33d5aca8e59eae234" name="a2c14e30b8edd80c33d5aca8e59eae234"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c14e30b8edd80c33d5aca8e59eae234">&#9670;&#160;</a></span>STAT_STRUCT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_STRUCT&#160;&#160;&#160;struct stat</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00028">28</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="aa62433a7807cf7f0bc9cf3f8323ba80c" name="aa62433a7807cf7f0bc9cf3f8323ba80c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa62433a7807cf7f0bc9cf3f8323ba80c">&#9670;&#160;</a></span>TIMESTAMP_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMESTAMP_FORMAT&#160;&#160;&#160;&quot;%Y-%m-%d %H:%M:%S&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00040">40</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a244494b217506ed4f6b95e4e36283b43" name="a244494b217506ed4f6b95e4e36283b43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a244494b217506ed4f6b95e4e36283b43">&#9670;&#160;</a></span>check_log_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_log_file </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function should be called whenever a new log msg must be written. </p>
<p>Check if the log file is open, if not, a new file will be open.</p><ul>
<li>Either by creating a new file if no file is in the log directory.</li>
<li>Or creating a new file if the last used file reaches the max size. The new file will get the current file id + 1 or 0, if the id reached the max number of files.</li>
<li>Or opening the file that was last used, the current id will be set. <dl class="section return"><dt>Returns</dt><dd>0 if successfully, 1 if the current file was already closed, and a new file wasn't opened </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00144">144</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  144</span>                         {</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">if</span> (log_file) {</div>
<div class="line"><span class="lineno">  146</span>        fseek(log_file, 0, SEEK_END);</div>
<div class="line"><span class="lineno">  147</span>        <span class="keyword">const</span> <span class="keywordtype">long</span> file_size = ftell(log_file);</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">if</span> (file_size &gt;= MAX_FILE_SIZE) {</div>
<div class="line"><span class="lineno">  149</span>            fclose(log_file);<span class="comment">//close the current file</span></div>
<div class="line"><span class="lineno">  150</span>            file_id = (file_id + 1) % MAX_N_FILES;</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>            <span class="comment">// open a new file</span></div>
<div class="line"><span class="lineno">  153</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="#a1c7d106319f285b516ab672dbdb42f89">open_log_file</a>(1) != 0) {</div>
<div class="line"><span class="lineno">  154</span>                <span class="comment">// failed to open a new file</span></div>
<div class="line"><span class="lineno">  155</span>                <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  156</span>            }</div>
<div class="line"><span class="lineno">  157</span>        }</div>
<div class="line"><span class="lineno">  158</span>    }</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  160</span>}</div>
<div class="ttc" id="alogger_8c_html_a1c7d106319f285b516ab672dbdb42f89"><div class="ttname"><a href="#a1c7d106319f285b516ab672dbdb42f89">open_log_file</a></div><div class="ttdeci">int open_log_file(int is_init)</div><div class="ttdoc">Opens the log file with the current saved file id in appended modus.</div><div class="ttdef"><b>Definition</b> <a href="logger_8c_source.html#l00117">logger.c:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a03d231b23688d7e15fc0d99a2e291d49" name="a03d231b23688d7e15fc0d99a2e291d49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03d231b23688d7e15fc0d99a2e291d49">&#9670;&#160;</a></span>ensure_log_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ensure_log_dir </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ensures that the predefined log directory already exists, if not create a new one. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if successfully created or already exists, 1 if failed </dd></dl>

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00105">105</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  105</span>                         {</div>
<div class="line"><span class="lineno">  106</span>    STAT_STRUCT st;</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">if</span> (STAT_FUNC(LOG_DIRECTORY, &amp;st) == -1) {</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">if</span> (MKDIR(LOG_DIRECTORY) == -1) {</div>
<div class="line"><span class="lineno">  110</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  111</span>        }</div>
<div class="line"><span class="lineno">  112</span>    }</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  114</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4026eeab5ad9c9a701338f7f873ed33d" name="a4026eeab5ad9c9a701338f7f873ed33d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4026eeab5ad9c9a701338f7f873ed33d">&#9670;&#160;</a></span>get_latest_file_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_latest_file_id </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function gets the latest file id from the log directory. </p>
<dl class="section return"><dt>Returns</dt><dd>0 or greater if successfully, -1 if failed </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function should only be called once when the logger is initialized. </dd></dl>

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00162">162</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  162</span>                             {</div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#a03d231b23688d7e15fc0d99a2e291d49">ensure_log_dir</a>() != 0) {</div>
<div class="line"><span class="lineno">  164</span>        <span class="comment">// failed to ensure the log directory</span></div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  166</span>    }</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordtype">int</span> latest_id = 0;</div>
<div class="line"><span class="lineno">  169</span>    DIR* dir = opendir(LOG_DIRECTORY);</div>
<div class="line"><span class="lineno">  170</span>    <span class="keyword">struct </span>dirent* entry;</div>
<div class="line"><span class="lineno">  171</span>    time_t latest_time = 0;</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">if</span> (!dir) {</div>
<div class="line"><span class="lineno">  174</span>        <span class="comment">// failed to open the log directory</span></div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  176</span>    }</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>    <span class="comment">// Iterate through the log directory and find the latest used file</span></div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">while</span> ((entry = readdir(dir)) != NULL) {</div>
<div class="line"><span class="lineno">  180</span>        <span class="keywordtype">int</span> id;</div>
<div class="line"><span class="lineno">  181</span>        <span class="keyword">struct </span>stat file_stat;</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">if</span> (sscanf(entry-&gt;d_name, LOG_FILE_FORMAT, &amp;<span class="keywordtype">id</span>) == 1 &amp;&amp; <span class="keywordtype">id</span> &gt;= 0 &amp;&amp; <span class="keywordtype">id</span> &lt; MAX_N_FILES) {</div>
<div class="line"><span class="lineno">  184</span>            <span class="keywordtype">char</span> filepath[MAX_PATH_SIZE];</div>
<div class="line"><span class="lineno">  185</span>            snprintf(filepath, <span class="keyword">sizeof</span>(filepath), <span class="stringliteral">&quot;%s/%s&quot;</span>, LOG_DIRECTORY, entry-&gt;d_name);</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>            <span class="keywordflow">if</span> (stat(filepath, &amp;file_stat) == 0) {</div>
<div class="line"><span class="lineno">  188</span>                <span class="keywordflow">if</span> (file_stat.st_mtime &gt; latest_time) {</div>
<div class="line"><span class="lineno">  189</span>                    <span class="comment">// found a newer file</span></div>
<div class="line"><span class="lineno">  190</span>                    latest_time = file_stat.st_mtime;</div>
<div class="line"><span class="lineno">  191</span>                    latest_id = id;</div>
<div class="line"><span class="lineno">  192</span>                }</div>
<div class="line"><span class="lineno">  193</span>            }</div>
<div class="line"><span class="lineno">  194</span>        }</div>
<div class="line"><span class="lineno">  195</span>    }</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>    closedir(dir);</div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordflow">return</span> latest_id;</div>
<div class="line"><span class="lineno">  199</span>}</div>
<div class="ttc" id="alogger_8c_html_a03d231b23688d7e15fc0d99a2e291d49"><div class="ttname"><a href="#a03d231b23688d7e15fc0d99a2e291d49">ensure_log_dir</a></div><div class="ttdeci">int ensure_log_dir(void)</div><div class="ttdoc">Ensures that the predefined log directory already exists, if not create a new one.</div><div class="ttdef"><b>Definition</b> <a href="logger_8c_source.html#l00105">logger.c:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a542d97fece81d2a06b1e1ddf3d461c8a" name="a542d97fece81d2a06b1e1ddf3d461c8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a542d97fece81d2a06b1e1ddf3d461c8a">&#9670;&#160;</a></span>init_logger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_logger </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the logging system for the application. </p>
<p>This function sets up the logging system to be ready for recording log entries. It creates or opens the log file, initializes the ring buffer used for storing log entries temporarily, and starts the thread that asynchronously writes logs to the file. This ensures logging is operational and ready to use for the application's lifetime.</p>
<p>Notes:</p><ul>
<li>This function can only be called once during the application's lifecycle. Subsequent calls will have no effect if the logger is already initialized.</li>
<li>All required resources for logging, such as the log file and ring buffer, are prepared within this initialization process.</li>
<li>If any of the initialization steps fail (e.g., ring buffer initialization or file operations), the function ensures cleanup of allocated resources. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00232">232</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  232</span>                       {</div>
<div class="line"><span class="lineno">  233</span>    <span class="comment">// ensures the init_logger can only be called when the file is null</span></div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">if</span> (log_file == NULL) {</div>
<div class="line"><span class="lineno">  235</span>        <span class="keywordflow">if</span> (init_ringbuffer(&amp;log_buffer) == 0) {</div>
<div class="line"><span class="lineno">  236</span>            file_id = <a class="code hl_function" href="#a4026eeab5ad9c9a701338f7f873ed33d">get_latest_file_id</a>();</div>
<div class="line"><span class="lineno">  237</span>            <span class="keywordflow">if</span> (file_id == -1 || <a class="code hl_function" href="#a1c7d106319f285b516ab672dbdb42f89">open_log_file</a>(0) != 0) {</div>
<div class="line"><span class="lineno">  238</span>                fclose(log_file);</div>
<div class="line"><span class="lineno">  239</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  240</span>                <a class="code hl_function" href="#a564a76b9f2eaa839be733afb99ffb45d">start_log_writer_thread</a>();</div>
<div class="line"><span class="lineno">  241</span>            }</div>
<div class="line"><span class="lineno">  242</span>        }</div>
<div class="line"><span class="lineno">  243</span>    }</div>
<div class="line"><span class="lineno">  244</span>}</div>
<div class="ttc" id="alogger_8c_html_a4026eeab5ad9c9a701338f7f873ed33d"><div class="ttname"><a href="#a4026eeab5ad9c9a701338f7f873ed33d">get_latest_file_id</a></div><div class="ttdeci">int get_latest_file_id(void)</div><div class="ttdoc">This function gets the latest file id from the log directory.</div><div class="ttdef"><b>Definition</b> <a href="logger_8c_source.html#l00162">logger.c:162</a></div></div>
<div class="ttc" id="alogger_8c_html_a564a76b9f2eaa839be733afb99ffb45d"><div class="ttname"><a href="#a564a76b9f2eaa839be733afb99ffb45d">start_log_writer_thread</a></div><div class="ttdeci">void start_log_writer_thread(void)</div><div class="ttdoc">Starts the log writer thread.</div><div class="ttdef"><b>Definition</b> <a href="logger_8c_source.html#l00201">logger.c:201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa70df4f70b7969a40b70fda659005550" name="aa70df4f70b7969a40b70fda659005550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa70df4f70b7969a40b70fda659005550">&#9670;&#160;</a></span>log_msg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_msg </td>
          <td>(</td>
          <td class="paramtype">log_level_t</td>          <td class="paramname"><span class="paramname"><em>level</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>module</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs a formatted message with a specified log level and module. </p>
<p>This function generates a log entry that includes a timestamp, log level, module name, and a custom message formatted using a variable argument list. The log message is written to a ring buffer for asynchronous processing.</p>
<p>Notes:</p><ul>
<li>The logging system must be initialized and running before using this function. Otherwise, the function will return without performing any operations.</li>
<li>The log level determines the severity or importance of the message.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>The severity level of the log message (e.g., DEBUG, INFO, ERROR). If the provided log level exceeds the maximum defined levels, the INFO level will be used as a fallback. </td></tr>
    <tr><td class="paramname">module</td><td>A string identifying the module or component generating the log message. </td></tr>
    <tr><td class="paramname">format</td><td>A printf-style format string for the message content. </td></tr>
    <tr><td class="paramname">...</td><td>Additional arguments to be formatted into the log message according to the format string. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00246">246</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  246</span>                                                                                   {</div>
<div class="line"><span class="lineno">  247</span>    <span class="keywordflow">if</span> (log_file == NULL || !logger_is_running) {</div>
<div class="line"><span class="lineno">  248</span>        <span class="comment">// logger is not initialized or not running</span></div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  250</span>    }</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>    <span class="comment">//get timestamp</span></div>
<div class="line"><span class="lineno">  253</span>    <span class="keyword">const</span> time_t now = time(NULL);</div>
<div class="line"><span class="lineno">  254</span>    <span class="keyword">const</span> <span class="keyword">struct </span>tm* tm = localtime(&amp;now);</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>    <span class="keywordtype">char</span> timestamp[32];</div>
<div class="line"><span class="lineno">  257</span>    strftime(timestamp, <span class="keyword">sizeof</span>(timestamp), TIMESTAMP_FORMAT, tm);</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* log_level;</div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordflow">if</span> (level &gt;= MAX_LOG_LEVEL) {</div>
<div class="line"><span class="lineno">  261</span>        log_level = log_level_str[INFO];</div>
<div class="line"><span class="lineno">  262</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  263</span>        log_level = log_level_str[level];</div>
<div class="line"><span class="lineno">  264</span>    }</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    va_list args;</div>
<div class="line"><span class="lineno">  267</span>    va_start(args, format);</div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordtype">char</span> msg[MAX_MSG_SIZE - MAX_HEADER_SIZE];</div>
<div class="line"><span class="lineno">  269</span>    vsnprintf(msg, <span class="keyword">sizeof</span>(msg), format, args);</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>    <span class="keywordtype">char</span> <a class="code hl_function" href="#aa70df4f70b7969a40b70fda659005550">log_msg</a>[MAX_MSG_SIZE];</div>
<div class="line"><span class="lineno">  272</span>    snprintf(<a class="code hl_function" href="#aa70df4f70b7969a40b70fda659005550">log_msg</a>, MAX_MSG_SIZE, MSG_FORMAT, timestamp, log_level, module, msg);</div>
<div class="line"><span class="lineno">  273</span>    va_end(args);</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>    write_to_ringbuffer(&amp;log_buffer, <a class="code hl_function" href="#aa70df4f70b7969a40b70fda659005550">log_msg</a>);</div>
<div class="line"><span class="lineno">  276</span>}</div>
<div class="ttc" id="alogger_8c_html_aa70df4f70b7969a40b70fda659005550"><div class="ttname"><a href="#aa70df4f70b7969a40b70fda659005550">log_msg</a></div><div class="ttdeci">void log_msg(const log_level_t level, const char *module, const char *format,...)</div><div class="ttdoc">Logs a formatted message with a specified log level and module.</div><div class="ttdef"><b>Definition</b> <a href="logger_8c_source.html#l00246">logger.c:246</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac473ecd88ac8f7ac94805f2e335c67c5" name="ac473ecd88ac8f7ac94805f2e335c67c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac473ecd88ac8f7ac94805f2e335c67c5">&#9670;&#160;</a></span>log_writer_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_writer_thread </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will be called from a different thread to read from the ringbuffer and then write in the log file. </p>

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00207">207</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  207</span>                         {</div>
<div class="line"><span class="lineno">  208</span>    <span class="keywordtype">bool</span> running = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordflow">while</span> (running) {</div>
<div class="line"><span class="lineno">  210</span>        <span class="keywordtype">char</span> <a class="code hl_function" href="#aa70df4f70b7969a40b70fda659005550">log_msg</a>[MAX_MSG_SIZE];</div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">if</span> (read_from_ringbuffer(&amp;log_buffer, <a class="code hl_function" href="#aa70df4f70b7969a40b70fda659005550">log_msg</a>) == 0) {</div>
<div class="line"><span class="lineno">  212</span>            <span class="comment">// message successfully read from the ringbuffer</span></div>
<div class="line"><span class="lineno">  213</span>            <a class="code hl_function" href="#a244494b217506ed4f6b95e4e36283b43">check_log_file</a>();</div>
<div class="line"><span class="lineno">  214</span>            <span class="keywordflow">if</span> (log_file) {</div>
<div class="line"><span class="lineno">  215</span>                fprintf(log_file, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code hl_function" href="#aa70df4f70b7969a40b70fda659005550">log_msg</a>);</div>
<div class="line"><span class="lineno">  216</span>                fflush(log_file);</div>
<div class="line"><span class="lineno">  217</span>            }</div>
<div class="line"><span class="lineno">  218</span>        }</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">if</span> (!logger_is_running) {</div>
<div class="line"><span class="lineno">  220</span>            <span class="comment">// thread must be terminated</span></div>
<div class="line"><span class="lineno">  221</span>            running = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  222</span>        }</div>
<div class="line"><span class="lineno">  223</span>    }</div>
<div class="line"><span class="lineno">  224</span>    <span class="comment">//closes all pressures</span></div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">if</span> (log_file) {</div>
<div class="line"><span class="lineno">  226</span>        fclose(log_file);</div>
<div class="line"><span class="lineno">  227</span>        log_file = NULL;</div>
<div class="line"><span class="lineno">  228</span>    }</div>
<div class="line"><span class="lineno">  229</span>    free_ringbuffer(&amp;log_buffer);</div>
<div class="line"><span class="lineno">  230</span>}</div>
<div class="ttc" id="alogger_8c_html_a244494b217506ed4f6b95e4e36283b43"><div class="ttname"><a href="#a244494b217506ed4f6b95e4e36283b43">check_log_file</a></div><div class="ttdeci">int check_log_file(void)</div><div class="ttdoc">This function should be called whenever a new log msg must be written.</div><div class="ttdef"><b>Definition</b> <a href="logger_8c_source.html#l00144">logger.c:144</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1c7d106319f285b516ab672dbdb42f89" name="a1c7d106319f285b516ab672dbdb42f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c7d106319f285b516ab672dbdb42f89">&#9670;&#160;</a></span>open_log_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int open_log_file </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>is_init</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the log file with the current saved file id in appended modus. </p>
<p>If the file already exists, it will be first removed and then created. If no file is found, create a new file corresponding to fopen(...).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_init</td><td>if 0, no existing file will be removed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successfully opened, 1 if failed </dd></dl>

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00117">117</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  117</span>                                     {</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordtype">char</span> name[16];</div>
<div class="line"><span class="lineno">  119</span>    snprintf(name, <span class="keyword">sizeof</span>(name), LOG_FILE_FORMAT, file_id);</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>    <span class="keywordtype">char</span> filename[256];</div>
<div class="line"><span class="lineno">  122</span>    snprintf(filename, <span class="keyword">sizeof</span>(filename), <span class="stringliteral">&quot;%s&quot;</span> PATH_SEP <span class="stringliteral">&quot;%s&quot;</span>, LOG_DIRECTORY, name);</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">if</span> (is_init) {</div>
<div class="line"><span class="lineno">  125</span>        <span class="comment">// Check if the file already exists</span></div>
<div class="line"><span class="lineno">  126</span>        FILE* existing_file = fopen(filename, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">if</span> (existing_file) {</div>
<div class="line"><span class="lineno">  128</span>            fclose(existing_file);</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>            <span class="comment">// If the file already exists, remove it</span></div>
<div class="line"><span class="lineno">  131</span>            <span class="keywordflow">if</span> (remove(filename) != 0) {</div>
<div class="line"><span class="lineno">  132</span>                <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  133</span>            }</div>
<div class="line"><span class="lineno">  134</span>        }</div>
<div class="line"><span class="lineno">  135</span>    }</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    log_file = fopen(filename, <span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line"><span class="lineno">  138</span>    <span class="keywordflow">if</span> (!log_file) {</div>
<div class="line"><span class="lineno">  139</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  140</span>    }</div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  142</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d815b48f04fdfadbb66a1a6bebbe721" name="a1d815b48f04fdfadbb66a1a6bebbe721"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d815b48f04fdfadbb66a1a6bebbe721">&#9670;&#160;</a></span>shutdown_logger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shutdown_logger </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shuts down the logging system for the application. </p>
<p>This function terminates the logging system, ensuring that no further log entries are recorded. It sets the logger's running state to false, effectively disabling any ongoing or future logging operations.</p>
<p>Use this function to cleanly release logging resources and mark the completion of logging operations at the end of the application's lifecycle or during application shutdown sequences.</p>
<p>Notes:</p><ul>
<li>Once this function is called, logging within the application will cease to function.</li>
<li>This function should be called after all dependent systems and processes using the logger are finalized. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00278">278</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  278</span>                           {</div>
<div class="line"><span class="lineno">  279</span>    logger_is_running = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  280</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a564a76b9f2eaa839be733afb99ffb45d" name="a564a76b9f2eaa839be733afb99ffb45d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a564a76b9f2eaa839be733afb99ffb45d">&#9670;&#160;</a></span>start_log_writer_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void start_log_writer_thread </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the log writer thread. </p>
<p>This function will be called from the logger initialization function. </p>

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00201">201</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  201</span>                                   {</div>
<div class="line"><span class="lineno">  202</span>    logger_is_running = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    <a class="code hl_function" href="thread__handler_8c.html#ae977c56a16e1c4409e2ed3cdb804a887">start_simple_thread</a>(<a class="code hl_function" href="#ac473ecd88ac8f7ac94805f2e335c67c5">log_writer_thread</a>);</div>
<div class="line"><span class="lineno">  205</span>}</div>
<div class="ttc" id="alogger_8c_html_ac473ecd88ac8f7ac94805f2e335c67c5"><div class="ttname"><a href="#ac473ecd88ac8f7ac94805f2e335c67c5">log_writer_thread</a></div><div class="ttdeci">void log_writer_thread(void)</div><div class="ttdoc">This function will be called from a different thread to read from the ringbuffer and then write in th...</div><div class="ttdef"><b>Definition</b> <a href="logger_8c_source.html#l00207">logger.c:207</a></div></div>
<div class="ttc" id="athread__handler_8c_html_ae977c56a16e1c4409e2ed3cdb804a887"><div class="ttname"><a href="thread__handler_8c.html#ae977c56a16e1c4409e2ed3cdb804a887">start_simple_thread</a></div><div class="ttdeci">void start_simple_thread(void(*thread_func)(void))</div><div class="ttdoc">Starts a new thread with the given function.</div><div class="ttdef"><b>Definition</b> <a href="thread__handler_8c_source.html#l00056">thread_handler.c:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="a26004895b14f496087255e72745bee14" name="a26004895b14f496087255e72745bee14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26004895b14f496087255e72745bee14">&#9670;&#160;</a></span>file_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int file_id = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00103">103</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="ab4698c0d5c140a233de44e801491fc35" name="ab4698c0d5c140a233de44e801491fc35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4698c0d5c140a233de44e801491fc35">&#9670;&#160;</a></span>log_buffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structring__buffer__t.html">ring_buffer_t</a> log_buffer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00098">98</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="ab936051f5aaca44c6c3c41dee0d19c36" name="ab936051f5aaca44c6c3c41dee0d19c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab936051f5aaca44c6c3c41dee0d19c36">&#9670;&#160;</a></span>log_file</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE* log_file = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00097">97</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
<a id="af20b78be3e637717e6e622f23bff02f4" name="af20b78be3e637717e6e622f23bff02f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af20b78be3e637717e6e622f23bff02f4">&#9670;&#160;</a></span>log_level_str</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* log_level_str[] = {&quot;DEBUG&quot;, &quot;FINE&quot;, &quot;INFO&quot;, &quot;WARNING&quot;, &quot;ERROR&quot;}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00043">43</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   43</span>{<span class="stringliteral">&quot;DEBUG&quot;</span>, <span class="stringliteral">&quot;FINE&quot;</span>, <span class="stringliteral">&quot;INFO&quot;</span>, <span class="stringliteral">&quot;WARNING&quot;</span>, <span class="stringliteral">&quot;ERROR&quot;</span>};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e9f18da6d462f70b0105ba3ee976e16" name="a4e9f18da6d462f70b0105ba3ee976e16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e9f18da6d462f70b0105ba3ee976e16">&#9670;&#160;</a></span>logger_is_running</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool logger_is_running = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="logger_8c_source.html#l00101">101</a> of file <a class="el" href="logger_8c_source.html">logger.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="dir_b3320b59a4aa4a7431bc8488b87009bf.html">logging</a></li><li class="navelem"><a href="logger_8c.html">logger.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
